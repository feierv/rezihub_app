{% load static %}

<!DOCTYPE html>
<html lang="ro">
    <head>
        <!-- Metadata -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Classes & script import -->
        <link href="{% static '/css/_main.css' %}" rel="stylesheet">
        <script src="{% static '/js/main.js' %}"></script>
        <script src="{% static '/js/utils.js' %}"></script>

        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet">
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
            rel="stylesheet">

        <!-- Misc -->
        <title>Rezihub</title>
    </head>
    <body>
        {% csrf_token %}
        <main id="main">
            {% if request.user.is_authenticated %}
                {% include '_navbar.html' %}
            {% endif %}
            {% block content %}
            <!-- page content -->
            {% endblock %}
        </main>
        <!-- Inline Bootstrap scripts -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
        // This script will trigger focus on the input element when the modal is shown
        $('#myModal').on('shown.bs.modal', function () {
            $('#myInput').trigger('focus');
        });

        // Trigger the modal and focus on input when button is clicked
        $('#launchModalButton').click(function () {
            $('#exampleModal').modal('show');
            $('#modalInput').trigger('focus');
        });
        $('#close-todo-modal').click(function () {
            $('#exampleModal').modal('hide')
        });
        $('#close-todo-modal-update').click(function () {
          $('#updateModal').modal('hide')
      });


      const detailUrl = `{% url 'todo-detail' todo_id=0 %}`
      const updateUrl = `{% url 'update-todo' todo_id=0 %}`
      const deleteUrl = `{% url 'todo-delete' todo_id=0 %}`
      const retrieveUrl = `{% url 'get-todo' todo_id=0 %}`

        addRemoveEventTodo(deleteUrl)
        addRetrieveEventTodo(retrieveUrl, updateUrl)
        const todoItemsDiv = document.querySelector('.todo__list');
        todoItemsDiv.addEventListener('change', event => {
            UpdateTasksPositions(event, detailUrl, deleteUrl)
        });
      </script>
      
    </body>
</html>
